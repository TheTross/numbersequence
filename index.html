<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kindergarten Number Adventure</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ffe0f7, #e3f2fd);
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }
    .app {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .page {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 16px;
      text-align: center;
    }
    h1 {
      font-size: 26px;
      margin: 4px 0 10px;
      color: #6a1b9a;
    }
    h2 {
      font-size: 22px;
      margin: 8px 0;
      color: #3949ab;
    }
    p {
      margin: 4px 0;
    }
    .big-number {
      font-size: 80px;
      font-weight: bold;
      margin: 10px 0 4px;
      color: #ff7043;
      text-shadow: 0 3px 0 #ffccbc;
    }
    .word {
      font-size: 22px;
      margin-bottom: 10px;
      text-transform: capitalize;
      color: #5d4037;
    }
    .dots {
      margin: 10px 0 8px;
    }
    .dot {
      display: inline-block;
      width: 20px;
      height: 20px;
      margin: 4px;
      border-radius: 50%;
      background: #ffca28;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      padding: 8px 16px 12px;
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(4px);
    }
    button {
      background: #42a5f5;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 999px;
      font-size: 14px;
      cursor: pointer;
    }
    button:disabled {
      background: #cfd8dc;
      cursor: default;
    }
    .pill {
      display: inline-block;
      padding: 4px 12px;
      font-size: 13px;
      border-radius: 999px;
      background: #e3f2fd;
      color: #1976d2;
      margin-bottom: 8px;
    }
    .tagline {
      font-size: 15px;
      color: #7e57c2;
      margin-bottom: 6px;
    }
    .sequence-row {
      font-size: 28px;
      margin: 14px 0;
    }
    .num-input {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      border: 2px solid #90a4ae;
      text-align: center;
      font-size: 22px;
      margin: 0 4px;
    }
    .feedback {
      min-height: 22px;
      font-size: 15px;
      margin-top: 8px;
    }
    .good {
      color: #2e7d32;
    }
    .bad {
      color: #c62828;
    }
    .choices {
      margin: 10px 0;
    }
    .choice-btn {
      background: #fff3e0;
      color: #ef6c00;
      border-radius: 14px;
      border: 2px solid #ffb74d;
      margin: 4px;
      padding: 8px 12px;
      font-size: 18px;
      cursor: pointer;
    }
    .small-number-line {
      margin-top: 8px;
      font-size: 18px;
      color: #546e7a;
    }
    .card-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 12px;
    }
    .card {
      width: 80px;
      height: 80px;
      border-radius: 16px;
      border: 2px solid #ce93d8;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3e5f5;
      cursor: pointer;
    }
    .card span {
      font-size: 30px;
      color: #6a1b9a;
    }
    .home-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      margin-top: 16px;
      width: 100%;
      max-width: 480px;
    }
    .home-btn {
      border-radius: 16px;
      border: 2px solid #bbdefb;
      background: #e3f2fd;
      padding: 12px 6px;
      font-size: 14px;
      color: #1e88e5;
      cursor: pointer;
    }
    .home-btn b {
      display: block;
      font-size: 15px;
      margin-bottom: 4px;
    }
    .range-line {
      margin-top: 10px;
      font-size: 18px;
      color: #37474f;
    }
    /* Full-width clickable number line 1‚Äì20 */
    .number-line {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px;
      margin: 16px 0 8px;
    }
    .number-bubble {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      border: 2px solid #90a4ae;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      background: #ffffff;
      cursor: pointer;
      transition: transform 0.15s, background 0.15s, border-color 0.15s;
    }
    .number-bubble.clicked {
      border-color: #42a5f5;
      background: #bbdefb;
      transform: scale(1.1);
    }
    .number-bubble.correct {
      border-color: #2e7d32;
      background: #c8e6c9;
    }
    .number-bubble.eliminated {
      opacity: 0.3;
    }
  </style>
</head>
<body>
  <div class="app">
    <div id="page" class="page"></div>
    <div class="nav">
      <button id="homeBtn">üè† Home</button>
      <button id="prevBtn">‚óÄ Back</button>
      <button id="nextBtn">Next ‚ñ∂</button>
    </div>
  </div>

  <script>
    // Words for numbers 1‚Äì10
    const numberWords = [
      "", "one","two","three","four",
      "five","six","seven","eight","nine","ten"
    ];

    // Number pages 1‚Äì10
    const numberPages = Array.from({ length: 10 }, (_, i) => {
      const n = i + 1;
      return { type: "number", n };
    });

    // Missing-number sequences [web:62][web:69]
    const missingPages = [
      { sequence: [1, 2, null, 4], answers: [3] },
      { sequence: [3, null, 5], answers: [4] },
      { sequence: [3, null, 7], answers: [5] },
      { sequence: [6, 7, null, 9, 10], answers: [8] },
      { sequence: [2, null, 6, null, 10], answers: [4, 8] }
    ];

    // Before / After / Between
    const relationPages = [
      { mode: "before", shown: 5, answer: 4 },
      { mode: "after", shown: 7, answer: 8 },
      { mode: "between", left: 4, right: 6, answer: 5 }
    ];

    // Extra games
    const extraPages = [
      {
        type: "match",
        number: 4,
        options: [2, 4, 6]
      },
      {
        type: "nextNumber",
        start: 3,
        options: [2, 4, 5]
      },
      {
        type: "finishSequence",
        pattern: [1, 2, 3],
        correctNext: 4,
        choices: [4, 5, 6]
      },
      {
        type: "cardPick",
        displaySequence: [5, null, 7],
        correct: 6,
        cardOptions: [4, 6, 8]
      }
    ];

    // Guess My Number setup (1‚Äì20 clickable line) [web:83][web:90]
    const guessMin = 1;
    const guessMax = 20;
    let secretNumber = null;
    let guessMessage = "";
    let eliminated = {}; // store which numbers are ruled out

    function resetGuessGame() {
      secretNumber = Math.floor(Math.random() * (guessMax - guessMin + 1)) + guessMin;
      guessMessage = "Tap a number to guess. I‚Äôll say higher or lower.";
      eliminated = {};
    }

    // Build page list
    const pages = [];

    // Home
    pages.push({ type: "home" });

    // Section: Numbers 1‚Äì10
    pages.push({ type: "sectionHeader", title: "Numbers 1‚Äì10" });
    numberPages.forEach(p => pages.push(p));

    // Section: Missing numbers
    pages.push({ type: "sectionHeader", title: "Missing Numbers" });
    missingPages.forEach((item, index) => {
      pages.push({ type: "missing", data: item, id: "missing_" + index });
    });

    // Section: Before / After / Between
    pages.push({ type: "sectionHeader", title: "Before, After & Between" });
    relationPages.forEach((item, index) => {
      pages.push({ type: "relation", data: item, id: "relation_" + index });
    });

    // Section: Fun games
    pages.push({ type: "sectionHeader", title: "Fun Number Games" });
    extraPages.forEach((item, index) => {
      pages.push({ type: item.type, data: item, id: "extra_" + index });
    });

    // Guess My Number section
    pages.push({ type: "sectionHeader", title: "Guess My Number (1‚Äì20)" });
    pages.push({ type: "guessNumber", id: "guess_1" });

    // Finish page
    pages.push({ type: "finish" });

    let currentPage = 0;

    const pageDiv = document.getElementById("page");
    const homeBtn = document.getElementById("homeBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    function firstIndexOfType(type) {
      return pages.findIndex(p => p.type === type);
    }

    function renderPage() {
      const p = pages[currentPage];
      let html = "";

      if (p.type === "home") {
        html += `
          <h1>My Number Adventure</h1>
          <div class="tagline">Tap a button to choose your game.</div>
          <div class="home-grid">
            <button class="home-btn" onclick="goToSection('number')">
              <b>Numbers 1‚Äì10</b>
              Learn each number
            </button>
            <button class="home-btn" onclick="goToSection('missing')">
              <b>Missing Numbers</b>
              Fill in blanks
            </button>
            <button class="home-btn" onclick="goToSection('relation')">
              <b>Before / After</b>
              Number line help
            </button>
            <button class="home-btn" onclick="goToSection('games')">
              <b>Games</b>
              Matching & patterns
            </button>
            <button class="home-btn" onclick="goToSection('guess')">
              <b>Guess My Number</b>
              1‚Äì20 higher / lower
            </button>
          </div>
        `;
      }

      if (p.type === "number") {
        const n = p.n;
        html += `
          <div class="pill">Number ${n}</div>
          <h2>This is number</h2>
          <div class="big-number">${n}</div>
          <div class="word">${numberWords[n]}</div>
          <div class="dots">
            ${"<span class='dot'></span>".repeat(n)}
          </div>
          <p>Say the number out loud, then count the dots together.</p>
        `;
      }

      if (p.type === "sectionHeader") {
        html += `
          <h1>${p.title}</h1>
          <p class="tagline">Get ready for a new kind of number game!</p>
        `;
      }

      if (p.type === "missing") {
        const seq = p.data.sequence;
        const id = p.id;
        html += `
          <div class="pill">Missing Number</div>
          <h2>Say the numbers out loud, then fill the box.</h2>
          <div class="sequence-row">
        `;
        seq.forEach((num, i) => {
          if (num === null) {
            html += `<input class="num-input" maxlength="2" id="${id}_i${i}" />`;
          } else {
            html += `<span>${num}</span>`;
          }
          if (i < seq.length - 1) html += " , ";
        });
        html += `
          </div>
          <p>Hint: Count in order and listen for the number that is missing.</p>
          <button onclick="checkMissing('${id}')">Check</button>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "relation") {
        const d = p.data;
        const id = p.id;
        let prompt = "";
        let sequenceHtml = "";

        if (d.mode === "before") {
          prompt = "What number comes before?";
          sequenceHtml = `<input class="num-input" id="${id}_in" maxlength="2" /> , <span>${d.shown}</span>`;
        } else if (d.mode === "after") {
          prompt = "What number comes after?";
          sequenceHtml = `<span>${d.shown}</span> , <input class="num-input" id="${id}_in" maxlength="2" />`;
        } else {
          prompt = "What number goes between?";
          sequenceHtml = `<span>${d.left}</span> , <input class="num-input" id="${id}_in" maxlength="2" /> , <span>${d.right}</span>`;
        }

        html += `
          <div class="pill">${d.mode[0].toUpperCase() + d.mode.slice(1)}</div>
          <h2>${prompt}</h2>
          <div class="sequence-row">${sequenceHtml}</div>
          <div class="small-number-line">1 2 3 4 5 6 7 8 9 10</div>
          <p>Point to the numbers on the line and say them in order.</p>
          <button onclick="checkRelation('${id}')">Check</button>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "match") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Match</div>
          <h2>Which number matches these dots?</h2>
          <div class="dots">
            ${"<span class='dot'></span>".repeat(d.number)}
          </div>
          <p>Count the dots out loud. Then choose the right number.</p>
          <div class="choices">
            ${d.options.map(o => `
              <button class="choice-btn" onclick="checkChoice('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "nextNumber") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Next Number</div>
          <h2>What comes after ${d.start}?</h2>
          <div class="sequence-row">${d.start} , ?</div>
          <p>Start at ${d.start} and count on together.</p>
          <div class="choices">
            ${d.options.map(o => `
              <button class="choice-btn" onclick="checkNext('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "finishSequence") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Finish the Sequence</div>
          <h2>What comes next?</h2>
          <div class="sequence-row">
            ${d.pattern.join(" , ")} , __
          </div>
          <p>Say the pattern together: ${d.pattern.join(", ")} ...?</p>
          <div class="choices">
            ${d.choices.map(o => `
              <button class="choice-btn" onclick="checkFinish('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "cardPick") {
        const d = p.data;
        const id = p.id;
        const seq = d.displaySequence;
        html += `
          <div class="pill">Number Cards</div>
          <h2>Pick the missing number card</h2>
          <div class="sequence-row">
        `;
        seq.forEach((num, i) => {
          if (num === null) {
            html += `<span>__</span>`;
          } else {
            html += `<span>${num}</span>`;
          }
          if (i < seq.length - 1) html += " , ";
        });
        html += `
          </div>
          <p>Say the numbers you see, then choose the card that fits.</p>
          <div class="card-row">
            ${d.cardOptions.map(o => `
              <div class="card" onclick="checkCard('${id}', ${o})">
                <span>${o}</span>
              </div>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "guessNumber") {
        if (secretNumber === null) {
          resetGuessGame();
        }
        html += `
          <div class="pill">Guess My Number</div>
          <h2>I‚Äôm thinking of a number between ${guessMin} and ${guessMax}</h2>
          <p>Tap a number. I‚Äôll tell you if my secret number is higher or lower.</p>
          <div class="number-line">
            ${Array.from({ length: guessMax }, (_, i) => {
              const num = i + 1;
              const extraClass = eliminated[num]
                ? " eliminated"
                : "";
              return `
                <div
                  class="number-bubble${extraClass}"
                  data-num="${num}"
                  onclick="clickGuessBubble(${num})"
                >${num}</div>
              `;
            }).join("")}
          </div>
          <div id="guessFeedback" class="feedback">${guessMessage}</div>
          <button onclick="resetGuessAndRender()">New Secret Number</button>
        `;
      }

      if (p.type === "finish") {
        html += `
          <h1>Yay! You did it!</h1>
          <p class="tagline">You counted, found missing numbers, played games, and guessed numbers to 20.</p>
          <p>Tap <b>Home</b> to pick another game.</p>
        `;
      }

      pageDiv.innerHTML = html;

      // After rendering, mark any already eliminated bubbles
      if (p.type === "guessNumber") {
        Object.keys(eliminated).forEach(n => {
          const el = document.querySelector('.number-bubble[data-num="' + n + '"]');
          if (el) el.classList.add("eliminated");
        });
      }

      prevBtn.disabled = currentPage === 0;
      nextBtn.disabled = currentPage === pages.length - 1;
    }

    // HOME navigation
    window.goToSection = function(section) {
      let targetIndex = 0;
      if (section === "number") {
        targetIndex = firstIndexOfType("number");
      } else if (section === "missing") {
        targetIndex = firstIndexOfType("missing");
      } else if (section === "relation") {
        targetIndex = firstIndexOfType("relation");
      } else if (section === "games") {
        targetIndex = firstIndexOfType("match");
      } else if (section === "guess") {
        targetIndex = firstIndexOfType("guessNumber");
      }
      if (targetIndex >= 0) {
        currentPage = targetIndex;
        renderPage();
      }
    };

    // CHECK FUNCTIONS
    window.checkMissing = function(id) {
      const page = pages.find(p => p.id === id);
      const data = page.data;
      const feedback = document.getElementById(id + "_feedback");
      const seq = data.sequence;
      const expectedAnswers = data.answers;

      const inputs = [];
      seq.forEach((num, i) => {
        if (num === null) {
          const el = document.getElementById(id + "_i" + i);
          if (el) inputs.push(parseInt(el.value, 10));
        }
      });

      let correct = true;
      if (inputs.length !== expectedAnswers.length) {
        correct = false;
      } else {
        for (let i = 0; i < inputs.length; i++) {
          if (inputs[i] !== expectedAnswers[i]) {
            correct = false;
            break;
          }
        }
      }

      if (correct) {
        feedback.textContent = "Great job! You found the missing number!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Try again. Count the numbers out loud and listen for the missing one.";
        feedback.className = "feedback bad";
      }
    };

    window.checkRelation = function(id) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");
      const input = document.getElementById(id + "_in");
      const val = parseInt(input.value, 10);

      if (val === d.answer) {
        feedback.textContent = "Yes! That number fits perfectly.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Not quite. Point and count on the number line, then try again.";
        feedback.className = "feedback bad";
      }
    };

    window.checkChoice = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.number) {
        feedback.textContent = "You matched the dots and the number!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Oops! Count the dots one more time.";
        feedback.className = "feedback bad";
      }
    };

    window.checkNext = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.start + 1) {
        feedback.textContent = "Yes! That‚Äôs the next number.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Try again. Say the numbers in order: " + d.start + ", ...";
        feedback.className = "feedback bad";
      }
    };

    window.checkFinish = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.correctNext) {
        feedback.textContent = "Nice! You finished the sequence!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Say the pattern again and see what comes next.";
        feedback.className = "feedback bad";
      }
    };

    window.checkCard = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.correct) {
        feedback.textContent = "Perfect pick! That card completes the sequence.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Look at the numbers and think: which one belongs in the space?";
        feedback.className = "feedback bad";
      }
    };

    // GUESS MY NUMBER ‚Äì clickable bubbles
    window.clickGuessBubble = function(num) {
      if (secretNumber === null) resetGuessGame();

      const bubbles = document.querySelectorAll(".number-bubble");
      bubbles.forEach(b => b.classList.remove("clicked", "correct"));

      const bubble = document.querySelector('.number-bubble[data-num="' + num + '"]');
      if (!bubble) return;
      bubble.classList.add("clicked");

      const feedback = document.getElementById("guessFeedback");
      if (num === secretNumber) {
        bubble.classList.add("correct");
        guessMessage = "You got it! My secret number was " + secretNumber + "!";
        feedback.className = "feedback good";
      } else if (num < secretNumber) {
        guessMessage = "Higher than " + num + ". Tap a bigger number.";
        feedback.className = "feedback bad";
        for (let i = guessMin; i <= num; i++) eliminated[i] = true;
      } else {
        guessMessage = "Lower than " + num + ". Tap a smaller number.";
        feedback.className = "feedback bad";
        for (let i = num; i <= guessMax; i++) eliminated[i] = true;
      }

      feedback.textContent = guessMessage;
      // Apply eliminated style
      Object.keys(eliminated).forEach(n => {
        const el = document.querySelector('.number-bubble[data-num="' + n + '"]');
        if (el) el.classList.add("eliminated");
      });
    };

    window.resetGuessAndRender = function() {
      resetGuessGame();
      renderPage();
    };

    // NAVIGATION
    homeBtn.addEventListener("click", () => {
      currentPage = 0;
      renderPage();
    });

    prevBtn.addEventListener("click", () => {
      if (currentPage > 0) {
        currentPage--;
        renderPage();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentPage < pages.length - 1) {
        currentPage++;
        renderPage();
      }
    });

    // Initial render
    resetGuessGame();
    renderPage();
  </script>
</body>
</html>
