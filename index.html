<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kindergarten Number Booklet</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ffe0f7, #e3f2fd);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }
    .book {
      width: 380px;
      max-width: 92vw;
      background: #ffffff;
      border-radius: 20px;
      box-shadow: 0 8px 22px rgba(0,0,0,0.12);
      padding: 18px 20px 22px;
      text-align: center;
    }
    h1 {
      font-size: 24px;
      margin: 4px 0 10px;
      color: #6a1b9a;
    }
    h2 {
      font-size: 20px;
      margin: 8px 0;
      color: #3949ab;
    }
    p {
      margin: 4px 0;
    }
    .big-number {
      font-size: 70px;
      font-weight: bold;
      margin: 10px 0 4px;
      color: #ff7043;
      text-shadow: 0 3px 0 #ffccbc;
    }
    .word {
      font-size: 20px;
      margin-bottom: 10px;
      text-transform: capitalize;
      color: #5d4037;
    }
    .dots {
      margin: 10px 0 4px;
    }
    .dot {
      display: inline-block;
      width: 18px;
      height: 18px;
      margin: 3px;
      border-radius: 50%;
      background: #ffca28;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      margin-top: 16px;
    }
    button {
      background: #42a5f5;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 14px;
      cursor: pointer;
    }
    button:disabled {
      background: #cfd8dc;
      cursor: default;
    }
    .pill {
      display: inline-block;
      padding: 3px 10px;
      font-size: 12px;
      border-radius: 999px;
      background: #e3f2fd;
      color: #1976d2;
      margin-bottom: 6px;
    }
    .tagline {
      font-size: 14px;
      color: #7e57c2;
      margin-bottom: 4px;
    }
    .sequence-row {
      font-size: 24px;
      margin: 12px 0;
    }
    .num-input {
      width: 38px;
      height: 38px;
      border-radius: 10px;
      border: 2px solid #90a4ae;
      text-align: center;
      font-size: 20px;
      margin: 0 3px;
    }
    .feedback {
      min-height: 20px;
      font-size: 14px;
      margin-top: 6px;
    }
    .good {
      color: #2e7d32;
    }
    .bad {
      color: #c62828;
    }
    .choices {
      margin: 8px 0;
    }
    .choice-btn {
      background: #fff3e0;
      color: #ef6c00;
      border-radius: 12px;
      border: 2px solid #ffb74d;
      margin: 4px;
      padding: 6px 10px;
      font-size: 16px;
      cursor: pointer;
    }
    .small-number-line {
      margin-top: 6px;
      font-size: 16px;
      color: #546e7a;
    }
    .card-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    .card {
      width: 70px;
      height: 70px;
      border-radius: 14px;
      border: 2px solid #ce93d8;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3e5f5;
      cursor: pointer;
    }
    .card span {
      font-size: 26px;
      color: #6a1b9a;
    }
    .home-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }
    .home-btn {
      border-radius: 14px;
      border: 2px solid #bbdefb;
      background: #e3f2fd;
      padding: 10px 6px;
      font-size: 13px;
      color: #1e88e5;
      cursor: pointer;
    }
    .home-btn b {
      display: block;
      font-size: 14px;
      margin-bottom: 3px;
    }
    .range-line {
      margin-top: 6px;
      font-size: 18px;
      color: #37474f;
    }
  </style>
</head>
<body>
  <div class="book">
    <div id="page"></div>
    <div class="nav">
      <button id="prevBtn">◀ Back</button>
      <button id="nextBtn">Next ▶</button>
    </div>
  </div>

  <script>
    // Words for numbers 1–10
    const numberWords = [
      "", "one","two","three","four",
      "five","six","seven","eight","nine","ten"
    ];

    // 1) Number pages 1–10
    const numberPages = Array.from({ length: 10 }, (_, i) => {
      const n = i + 1;
      return { type: "number", n };
    });

    // 2) Missing-number sequences (kids see and say them) [web:62][web:69]
    const missingPages = [
      { sequence: [1, 2, null, 4], answers: [3] },               // 1, 2, __, 4
      { sequence: [3, null, 5], answers: [4] },                  // 3, __, 5
      { sequence: [3, null, 7], answers: [5] },                  // 3, __, 7
      { sequence: [6, 7, null, 9, 10], answers: [8] },           // 6, 7, __, 9, 10
      { sequence: [2, null, 6, null, 10], answers: [4, 8] }      // 2, __, 6, __, 10
    ];

    // 3) Before / After / Between
    const relationPages = [
      { mode: "before", shown: 5, answer: 4 },
      { mode: "after", shown: 7, answer: 8 },
      { mode: "between", left: 4, right: 6, answer: 5 }
    ];

    // 4) Extra interactive activities
    const extraPages = [
      {
        type: "match",
        number: 4,
        options: [2, 4, 6]
      },
      {
        type: "nextNumber",
        start: 3,
        options: [2, 4, 5]
      },
      {
        type: "finishSequence",
        pattern: [1, 2, 3],
        correctNext: 4,
        choices: [4, 5, 6]
      },
      {
        type: "cardPick",
        displaySequence: [5, null, 7],
        correct: 6,
        cardOptions: [4, 6, 8]
      }
    ];

    // 5) Guess My Number (1–20, higher/lower) [web:70][web:73][web:77]
    const guessMin = 1;
    const guessMax = 20;
    let secretNumber = null;
    let guessMessage = "";

    function resetGuessGame() {
      secretNumber = Math.floor(Math.random() * (guessMax - guessMin + 1)) + guessMin;
      guessMessage = "";
    }

    // Build pages list
    const pages = [];

    // Home screen
    pages.push({ type: "home" });

    // Section: Numbers 1–10
    pages.push({ type: "sectionHeader", title: "Numbers 1–10" });
    numberPages.forEach(p => pages.push(p));

    // Section: Missing numbers
    pages.push({ type: "sectionHeader", title: "Missing Numbers" });
    missingPages.forEach((item, index) => {
      pages.push({ type: "missing", data: item, id: "missing_" + index });
    });

    // Section: Before / After / Between
    pages.push({ type: "sectionHeader", title: "Before, After & Between" });
    relationPages.forEach((item, index) => {
      pages.push({ type: "relation", data: item, id: "relation_" + index });
    });

    // Section: Fun Number Games
    pages.push({ type: "sectionHeader", title: "Fun Number Games" });
    extraPages.forEach((item, index) => {
      pages.push({ type: item.type, data: item, id: "extra_" + index });
    });

    // Guess My Number section
    pages.push({ type: "sectionHeader", title: "Guess My Number (1–20)" });
    pages.push({ type: "guessNumber", id: "guess_1" });

    // Finish
    pages.push({ type: "finish" });

    let currentPage = 0;

    const pageDiv = document.getElementById("page");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    // Helper: find first index of a type
    function firstIndexOfType(type) {
      return pages.findIndex(p => p.type === type);
    }

    function renderPage() {
      const p = pages[currentPage];
      let html = "";

      if (p.type === "home") {
        html += `
          <h1>My Number Adventure</h1>
          <div class="tagline">Tap a button to choose your game.</div>
          <div class="home-grid">
            <button class="home-btn" onclick="goToSection('number')">
              <b>Numbers</b>
              1–10 pages
            </button>
            <button class="home-btn" onclick="goToSection('missing')">
              <b>Missing</b>
              Fill in numbers
            </button>
            <button class="home-btn" onclick="goToSection('relation')">
              <b>Before / After</b>
              Number line help
            </button>
            <button class="home-btn" onclick="goToSection('games')">
              <b>Games</b>
              Matching & patterns
            </button>
            <button class="home-btn" onclick="goToSection('guess')">
              <b>Guess My #</b>
              1–20 higher / lower
            </button>
          </div>
          <p style="margin-top:10px;">You can always tap <b>Back</b> to come home.</p>
        `;
      }

      if (p.type === "number") {
        const n = p.n;
        html += `
          <div class="pill">Number ${n}</div>
          <h2>This is number</h2>
          <div class="big-number">${n}</div>
          <div class="word">${numberWords[n]}</div>
          <div class="dots">
            ${"<span class='dot'></span>".repeat(n)}
          </div>
          <p>Say the number out loud, then count the dots together.</p>
        `;
      }

      if (p.type === "sectionHeader") {
        html += `
          <h1>${p.title}</h1>
          <p class="tagline">Get ready for a new kind of number game!</p>
        `;
      }

      if (p.type === "missing") {
        const seq = p.data.sequence;
        const id = p.id;
        html += `
          <div class="pill">Missing Number</div>
          <h2>Say the numbers out loud, then fill the box.</h2>
          <div class="sequence-row">
        `;
        seq.forEach((num, i) => {
          if (num === null) {
            html += `<input class="num-input" maxlength="2" id="${id}_i${i}" />`;
          } else {
            html += `<span>${num}</span>`;
          }
          if (i < seq.length - 1) html += " , ";
        });
        html += `
          </div>
          <p>Hint: Count in order and listen for the number that is missing.</p>
          <button onclick="checkMissing('${id}')">Check</button>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "relation") {
        const d = p.data;
        const id = p.id;
        let prompt = "";
        let sequenceHtml = "";

        if (d.mode === "before") {
          prompt = "What number comes before?";
          sequenceHtml = `<input class="num-input" id="${id}_in" maxlength="2" /> , <span>${d.shown}</span>`;
        } else if (d.mode === "after") {
          prompt = "What number comes after?";
          sequenceHtml = `<span>${d.shown}</span> , <input class="num-input" id="${id}_in" maxlength="2" />`;
        } else {
          prompt = "What number goes between?";
          sequenceHtml = `<span>${d.left}</span> , <input class="num-input" id="${id}_in" maxlength="2" /> , <span>${d.right}</span>`;
        }

        html += `
          <div class="pill">${d.mode[0].toUpperCase() + d.mode.slice(1)}</div>
          <h2>${prompt}</h2>
          <div class="sequence-row">${sequenceHtml}</div>
          <div class="small-number-line">1 2 3 4 5 6 7 8 9 10</div>
          <p>Point to the numbers on the line and say them in order.</p>
          <button onclick="checkRelation('${id}')">Check</button>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "match") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Match</div>
          <h2>Which number matches these dots?</h2>
          <div class="dots">
            ${"<span class='dot'></span>".repeat(d.number)}
          </div>
          <p>Count the dots out loud. Then choose the right number.</p>
          <div class="choices">
            ${d.options.map(o => `
              <button class="choice-btn" onclick="checkChoice('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "nextNumber") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Next Number</div>
          <h2>What comes after ${d.start}?</h2>
          <div class="sequence-row">${d.start} , ?</div>
          <p>Start at ${d.start} and count on together.</p>
          <div class="choices">
            ${d.options.map(o => `
              <button class="choice-btn" onclick="checkNext('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "finishSequence") {
        const d = p.data;
        const id = p.id;
        html += `
          <div class="pill">Finish the Sequence</div>
          <h2>What comes next?</h2>
          <div class="sequence-row">
            ${d.pattern.join(" , ")} , __
          </div>
          <p>Say the pattern together: ${d.pattern.join(", ")} ...?</p>
          <div class="choices">
            ${d.choices.map(o => `
              <button class="choice-btn" onclick="checkFinish('${id}', ${o})">${o}</button>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "cardPick") {
        const d = p.data;
        const id = p.id;
        const seq = d.displaySequence;
        html += `
          <div class="pill">Number Cards</div>
          <h2>Pick the missing number card</h2>
          <div class="sequence-row">
        `;
        seq.forEach((num, i) => {
          if (num === null) {
            html += `<span>__</span>`;
          } else {
            html += `<span>${num}</span>`;
          }
          if (i < seq.length - 1) html += " , ";
        });
        html += `
          </div>
          <p>Say the numbers you see, then choose the card that fits.</p>
          <div class="card-row">
            ${d.cardOptions.map(o => `
              <div class="card" onclick="checkCard('${id}', ${o})">
                <span>${o}</span>
              </div>
            `).join("")}
          </div>
          <div id="${id}_feedback" class="feedback"></div>
        `;
      }

      if (p.type === "guessNumber") {
        if (secretNumber === null) {
          resetGuessGame();
        }
        const rangeLine = Array.from({ length: guessMax }, (_, i) => i + 1).join(" ");
        html += `
          <div class="pill">Guess My Number</div>
          <h2>I’m thinking of a number...</h2>
          <p>It’s between ${guessMin} and ${guessMax}. Can you find it?</p>
          <div class="range-line">${rangeLine}</div>
          <p>Type a guess and I will say “higher” or “lower”.</p>
          <input class="num-input" id="guessInput" maxlength="2" />
          <button onclick="makeGuess()">Guess</button>
          <div id="guessFeedback" class="feedback">${guessMessage}</div>
          <button style="margin-top:6px;" onclick="resetGuessAndRender()">New Number</button>
        `;
      }

      if (p.type === "finish") {
        html += `
          <h1>Yay! You did it!</h1>
          <p class="tagline">You counted, found missing numbers, played games, and guessed numbers to 20.</p>
          <p>Tap <b>Back</b> to visit the home screen and play again.</p>
        `;
      }

      pageDiv.innerHTML = html;
      prevBtn.disabled = currentPage === 0;
      nextBtn.disabled = currentPage === pages.length - 1;
    }

    // HOME BUTTON HELPERS
    window.goToSection = function(section) {
      let targetIndex = 0;
      if (section === "number") {
        targetIndex = firstIndexOfType("number");
      } else if (section === "missing") {
        targetIndex = firstIndexOfType("missing");
      } else if (section === "relation") {
        targetIndex = firstIndexOfType("relation");
      } else if (section === "games") {
        targetIndex = firstIndexOfType("match");
      } else if (section === "guess") {
        targetIndex = firstIndexOfType("guessNumber");
      }
      if (targetIndex >= 0) {
        currentPage = targetIndex;
        renderPage();
      }
    };

    // CHECK FUNCTIONS
    window.checkMissing = function(id) {
      const page = pages.find(p => p.id === id);
      const data = page.data;
      const feedback = document.getElementById(id + "_feedback");
      const seq = data.sequence;
      const expectedAnswers = data.answers;

      const inputs = [];
      seq.forEach((num, i) => {
        if (num === null) {
          const el = document.getElementById(id + "_i" + i);
          if (el) inputs.push(parseInt(el.value, 10));
        }
      });

      let correct = true;
      if (inputs.length !== expectedAnswers.length) {
        correct = false;
      } else {
        for (let i = 0; i < inputs.length; i++) {
          if (inputs[i] !== expectedAnswers[i]) {
            correct = false;
            break;
          }
        }
      }

      if (correct) {
        feedback.textContent = "Great job! You found the missing number!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Try again. Count the numbers out loud and listen for the missing one.";
        feedback.className = "feedback bad";
      }
    };

    window.checkRelation = function(id) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");
      const input = document.getElementById(id + "_in");
      const val = parseInt(input.value, 10);

      if (val === d.answer) {
        feedback.textContent = "Yes! That number fits perfectly.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Not quite. Point and count on the number line, then try again.";
        feedback.className = "feedback bad";
      }
    };

    window.checkChoice = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.number) {
        feedback.textContent = "You matched the dots and the number!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Oops! Count the dots one more time.";
        feedback.className = "feedback bad";
      }
    };

    window.checkNext = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.start + 1) {
        feedback.textContent = "Yes! That’s the next number.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Try again. Say the numbers in order: " + d.start + ", ...";
        feedback.className = "feedback bad";
      }
    };

    window.checkFinish = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.correctNext) {
        feedback.textContent = "Nice! You finished the sequence!";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Say the pattern again and see what comes next.";
        feedback.className = "feedback bad";
      }
    };

    window.checkCard = function(id, choice) {
      const page = pages.find(p => p.id === id);
      const d = page.data;
      const feedback = document.getElementById(id + "_feedback");

      if (choice === d.correct) {
        feedback.textContent = "Perfect pick! That card completes the sequence.";
        feedback.className = "feedback good";
      } else {
        feedback.textContent = "Look at the numbers and think: which one belongs in the space?";
        feedback.className = "feedback bad";
      }
    };

    // GUESS MY NUMBER
    window.makeGuess = function() {
      const input = document.getElementById("guessInput");
      const feedback = document.getElementById("guessFeedback");
      const val = parseInt(input.value, 10);

      if (isNaN(val) || val < guessMin || val > guessMax) {
        guessMessage = "Pick a number between " + guessMin + " and " + guessMax + ".";
      } else if (val === secretNumber) {
        guessMessage = "You got it! The secret number was " + secretNumber + "!";
      } else if (val < secretNumber) {
        guessMessage = "Higher than " + val + ". Try again!";
      } else {
        guessMessage = "Lower than " + val + ". Try again!";
      }
      feedback.textContent = guessMessage;
      feedback.className = "feedback " + (val === secretNumber ? "good" : "bad");
      input.value = "";
    };

    window.resetGuessAndRender = function() {
      resetGuessGame();
      renderPage();
    };

    // NAVIGATION
    prevBtn.addEventListener("click", () => {
      if (currentPage > 0) {
        currentPage--;
        renderPage();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentPage < pages.length - 1) {
        currentPage++;
        renderPage();
      }
    });

    function firstIndexOfType(type) {
      return pages.findIndex(p => p.type === type);
    }

    // First render
    renderPage();
  </script>
</body>
</html>
